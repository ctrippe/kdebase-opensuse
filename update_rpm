#! /bin/sh

opwd=$PWD
tdir=`mktemp -d`
cd $tdir || exit 1
svn export https://svn.suse.de/svn/desktop/branches/openSUSE_11_0_BRANCH/kdebase4-openSUSE
if test -d "$MY_LCN_CHECKOUT"; then
  echo "Updating $MY_LCN_CHECKOUT"
  svn up $MY_LCN_CHECKOUT
else
  echo "No \$MY_LCN_CHECKOUT set, will checkout temporarly"
  svn export https://forgesvn1.novell.com/svn/suse-i18n/trunk/lcn
  export MY_LCN_CHECKOUT=$PWD/lcn
fi
pushd kdebase4-openSUSE/po
./fill_po.sh
popd

# remove non-released stuff
for f in update_rpm totranslate/*.sh; do
    rm kdebase4-openSUSE/$f
done

tar -cvj -f $opwd/kdebase4-openSUSE-11.0.tar.bz2 kdebase4-openSUSE
cd /
rm -rf $tdir
